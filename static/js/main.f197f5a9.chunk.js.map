{"version":3,"sources":["Button.js","constants.js","utility.js","Simon.js","index.js"],"names":["Button","_this$props","this","props","color","lit","onPress","react_default","a","createElement","className","classNames","onClick","PureComponent","constants","litDuration","failLitDuration","red","yellow","blue","green","randomColor","options","Math","floor","random","length","initialState","targetSequence","userSequence","litColor","buildingTargetSequence","Simon","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","objectSpread","next","bind","assertThisInitialized","press","light","reinitialize","gameOver","audios","Audio","concat","fail","hack","setState","push","i","play","timeout","set","pause","callback","console","log","_this2","_this$state2","hide","Button_Button","ReactDOM","render","Simon_Simon","document","getElementById"],"mappings":"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","file":"static/js/main.f197f5a9.chunk.js","sourcesContent":["import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nexport default class Button extends PureComponent {\r\n    render() {\r\n        const { color, lit, onPress } = this.props;\r\n        \r\n        return (\r\n            <div className={classNames('button', color, { lit })} onClick={() => onPress(color)} />\r\n        );\r\n    }\r\n}\r\n\r\nButton.propTypes = {\r\n    color: PropTypes.string.isRequired,\r\n    lit: PropTypes.bool.isRequired,\r\n    onPress: PropTypes.func.isRequired,\r\n};\r\n","export default {\r\n    litDuration: 500,\r\n    failLitDuration: 2000,\r\n    red: 'red',\r\n    yellow: 'yellow',\r\n    blue: 'blue',\r\n    green: 'green',\r\n};\r\n","import constants from './constants';\r\n\r\nexport function randomColor() {\r\n    const options = [constants.blue, constants.green, constants.yellow, constants.red];\r\n\r\n    return options[Math.floor(Math.random()*options.length)];\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport classNames from 'classnames';\r\nimport timeout from 'await-timeout';\r\nimport Button from './Button';\r\nimport constants from './constants';\r\nimport {randomColor} from './utility';\r\n\r\nimport './assets/Simon.css';\r\n\r\nconst initialState = {\r\n    targetSequence: [],\r\n    userSequence: [],\r\n    litColor: null,\r\n    buildingTargetSequence: false,    \r\n};\r\n\r\nexport default class Simon extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {...initialState};\r\n\r\n        this.next = this.next.bind(this);\r\n        this.press = this.press.bind(this);\r\n        this.light = this.light.bind(this);\r\n        this.reinitialize = this.reinitialize.bind(this);\r\n        this.gameOver = this.gameOver.bind(this);\r\n\r\n        this.audios = {};\r\n        this.audios[constants.yellow] = new Audio(`./audio/${constants.yellow}.mp3`);\r\n        this.audios[constants.blue] = new Audio(`./audio/${constants.blue}.mp3`);\r\n        this.audios[constants.green] = new Audio(`./audio/${constants.green}.mp3`);\r\n        this.audios[constants.red] = new Audio(`./audio/${constants.red}.mp3`);\r\n        this.audios.fail = new Audio('./audio/fail.mp3');\r\n\r\n        this.hack = {};\r\n    }\r\n\r\n    async next() {\r\n        this.setState({\r\n            buildingTargetSequence: true,\r\n        });\r\n\r\n        const targetSequence = [...this.state.targetSequence];\r\n        const color = randomColor();\r\n\r\n        targetSequence.push(color);\r\n\r\n        this.setState({\r\n            targetSequence,\r\n        });\r\n\r\n        for (let i = 0; i < targetSequence.length; i++) {\r\n            await this.light(targetSequence[i]);\r\n        }\r\n\r\n        this.setState({\r\n            buildingTargetSequence: false,\r\n        });\r\n    }\r\n\r\n    async gameOver(color) {\r\n        const audio = this.audios.fail;\r\n        audio.play();\r\n        this.setState({\r\n            litColor: color,\r\n        });\r\n\r\n        await timeout.set(constants.failLitDuration);\r\n        this.setState({\r\n            litColor: null,\r\n        });\r\n        await timeout.set(constants);\r\n\r\n        this.reinitialize();\r\n    }\r\n\r\n    async press(color) {\r\n        const { targetSequence, buildingTargetSequence, litColor } = this.state;\r\n        const userSequence = [...this.state.userSequence];\r\n\r\n        if (targetSequence.length === 0 || buildingTargetSequence || litColor || targetSequence.length === userSequence.length) {\r\n            return;\r\n        }\r\n\r\n        if (!this.hack.red) {\r\n            this.audios.red.play();\r\n            this.audios.red.pause();\r\n            this.hack.red = true;\r\n        }\r\n\r\n        if (!this.hack.yellow) {\r\n            this.audios.yellow.play();\r\n            this.audios.yellow.pause();\r\n            this.hack.yellow = true;\r\n        }\r\n\r\n        if (!this.hack.blue) {\r\n            this.audios.blue.play();\r\n            this.audios.blue.pause();\r\n            this.hack.blue = true;\r\n        }\r\n\r\n        if (!this.hack.green) {\r\n            this.audios.green.play();\r\n            this.audios.green.pause();\r\n            this.hack.green = true;\r\n        }\r\n\r\n        userSequence.push(color);\r\n\r\n        for (let i = 0; i < userSequence.length; i++) {\r\n            if (targetSequence[i] !== userSequence[i]) {\r\n                this.gameOver(targetSequence[i]);\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            userSequence,\r\n        });\r\n\r\n        await this.light(color);\r\n\r\n        if (userSequence.length === targetSequence.length) {\r\n            await timeout.set(1000);\r\n            this.setState({\r\n                userSequence: [],\r\n            });\r\n            this.next();        \r\n        }\r\n    }\r\n\r\n    async light(color, callback) {\r\n        console.log(`Lighting ${color}`);\r\n        const audio = this.audios[color];\r\n        audio.play();\r\n        this.setState({\r\n            litColor: color,\r\n        });\r\n\r\n        await timeout.set(constants.litDuration);\r\n        this.setState({\r\n            litColor: null,\r\n        });\r\n        await timeout.set(constants.litDuration);\r\n\r\n        if (callback) {\r\n            callback();\r\n        }\r\n    }\r\n\r\n    reinitialize() {\r\n        this.setState({...initialState});\r\n    }\r\n\r\n    render() {\r\n        const { litColor, targetSequence, userSequence } = this.state;\r\n\r\n        return (\r\n            <div className=\"simon\">\r\n                <button className={classNames('go', {hide: targetSequence.length > 0})} onClick={() => this.next()}>GO!</button>\r\n                <Button \r\n                    color={constants.yellow} \r\n                    lit={litColor === constants.yellow}\r\n                    onPress={this.press} \r\n                />\r\n                <Button \r\n                    color={constants.green} \r\n                    lit={litColor === constants.green}\r\n                    onPress={this.press} \r\n                />\r\n                <Button \r\n                    color={constants.red} \r\n                    lit={litColor === constants.red}\r\n                    onPress={this.press} \r\n                />\r\n                <Button \r\n                    color={constants.blue} \r\n                    lit={litColor === constants.blue}\r\n                    onPress={this.press} \r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Simon from './Simon';\n\nReactDOM.render(<Simon />, document.getElementById('root'));\n"],"sourceRoot":""}