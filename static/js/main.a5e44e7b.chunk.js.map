{"version":3,"sources":["Button.js","constants.js","utility.js","Simon.js","index.js"],"names":["Button","_this$props","this","props","color","lit","onPress","react_default","a","createElement","className","classNames","onClick","PureComponent","constants","litDuration","failLitDuration","red","yellow","blue","green","randomColor","options","Math","floor","random","length","initialState","targetSequence","userSequence","litColor","buildingTargetSequence","Simon","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","objectSpread","next","bind","assertThisInitialized","press","light","reinitialize","gameOver","audios","Audio","concat","fail","setState","push","i","play","timeout","set","callback","console","log","_this2","_this$state2","hide","Button_Button","ReactDOM","render","Simon_Simon","document","getElementById"],"mappings":"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","file":"static/js/main.a5e44e7b.chunk.js","sourcesContent":["import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nexport default class Button extends PureComponent {\r\n    render() {\r\n        const { color, lit, onPress } = this.props;\r\n        \r\n        return (\r\n            <div className={classNames('button', color, { lit })} onClick={() => onPress(color)} />\r\n        );\r\n    }\r\n}\r\n\r\nButton.propTypes = {\r\n    color: PropTypes.string.isRequired,\r\n    lit: PropTypes.bool.isRequired,\r\n    onPress: PropTypes.func.isRequired,\r\n};\r\n","export default {\r\n    litDuration: 500,\r\n    failLitDuration: 2000,\r\n    red: 'red',\r\n    yellow: 'yellow',\r\n    blue: 'blue',\r\n    green: 'green',\r\n};\r\n","import constants from './constants';\r\n\r\nexport function randomColor() {\r\n    const options = [constants.blue, constants.green, constants.yellow, constants.red];\r\n\r\n    return options[Math.floor(Math.random()*options.length)];\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport classNames from 'classnames';\r\nimport timeout from 'await-timeout';\r\nimport Button from './Button';\r\nimport constants from './constants';\r\nimport {randomColor} from './utility';\r\n\r\nimport './assets/Simon.css';\r\n\r\nconst initialState = {\r\n    targetSequence: [],\r\n    userSequence: [],\r\n    litColor: null,\r\n    buildingTargetSequence: false,    \r\n};\r\n\r\nexport default class Simon extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {...initialState};\r\n\r\n        this.next = this.next.bind(this);\r\n        this.press = this.press.bind(this);\r\n        this.light = this.light.bind(this);\r\n        this.reinitialize = this.reinitialize.bind(this);\r\n        this.gameOver = this.gameOver.bind(this);\r\n\r\n        this.audios = {};\r\n        this.audios[constants.yellow] = new Audio(`./audio/${constants.yellow}.mp3`);\r\n        this.audios[constants.blue] = new Audio(`./audio/${constants.blue}.mp3`);\r\n        this.audios[constants.green] = new Audio(`./audio/${constants.green}.mp3`);\r\n        this.audios[constants.red] = new Audio(`./audio/${constants.red}.mp3`);\r\n        this.audios.fail = new Audio('./audio/fail.mp3');\r\n    }\r\n\r\n    async next() {\r\n        this.setState({\r\n            buildingTargetSequence: true,\r\n        });\r\n\r\n        const targetSequence = [...this.state.targetSequence];\r\n        const color = randomColor();\r\n\r\n        targetSequence.push(color);\r\n\r\n        this.setState({\r\n            targetSequence,\r\n        });\r\n\r\n        for (let i = 0; i < targetSequence.length; i++) {\r\n            await this.light(targetSequence[i]);\r\n        }\r\n\r\n        this.setState({\r\n            buildingTargetSequence: false,\r\n        });\r\n    }\r\n\r\n    async gameOver(color) {\r\n        const audio = this.audios.fail;\r\n        audio.play();\r\n        this.setState({\r\n            litColor: color,\r\n        });\r\n\r\n        await timeout.set(constants.failLitDuration);\r\n        this.setState({\r\n            litColor: null,\r\n        });\r\n        await timeout.set(constants);\r\n\r\n        this.reinitialize();\r\n    }\r\n\r\n    async press(color) {\r\n        const { targetSequence, buildingTargetSequence, litColor } = this.state;\r\n        const userSequence = [...this.state.userSequence];\r\n\r\n        if (targetSequence.length === 0 || buildingTargetSequence || litColor || targetSequence.length === userSequence.length) {\r\n            return;\r\n        }\r\n\r\n        userSequence.push(color);\r\n\r\n        for (let i = 0; i < userSequence.length; i++) {\r\n            if (targetSequence[i] !== userSequence[i]) {\r\n                this.gameOver(targetSequence[i]);\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            userSequence,\r\n        });\r\n\r\n        await this.light(color);\r\n\r\n        if (userSequence.length === targetSequence.length) {\r\n            await timeout.set(1000);\r\n            this.setState({\r\n                userSequence: [],\r\n            });\r\n            this.next();        \r\n        }\r\n    }\r\n\r\n    async light(color, callback) {\r\n        console.log(`Lighting ${color}`);\r\n        const audio = this.audios[color];\r\n        audio.play();\r\n        this.setState({\r\n            litColor: color,\r\n        });\r\n\r\n        await timeout.set(constants.litDuration);\r\n        this.setState({\r\n            litColor: null,\r\n        });\r\n        await timeout.set(constants.litDuration);\r\n\r\n        if (callback) {\r\n            callback();\r\n        }\r\n    }\r\n\r\n    reinitialize() {\r\n        this.setState({...initialState});\r\n    }\r\n\r\n    render() {\r\n        const { litColor, targetSequence, userSequence } = this.state;\r\n\r\n        return (\r\n            <div className=\"simon\">\r\n                <button className={classNames('go', {hide: targetSequence.length > 0})} onClick={() => this.next()}>GO!</button>\r\n                <Button \r\n                    color={constants.yellow} \r\n                    lit={litColor === constants.yellow}\r\n                    onPress={this.press} \r\n                />\r\n                <Button \r\n                    color={constants.green} \r\n                    lit={litColor === constants.green}\r\n                    onPress={this.press} \r\n                />\r\n                <Button \r\n                    color={constants.red} \r\n                    lit={litColor === constants.red}\r\n                    onPress={this.press} \r\n                />\r\n                <Button \r\n                    color={constants.blue} \r\n                    lit={litColor === constants.blue}\r\n                    onPress={this.press} \r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Simon from './Simon';\n\nReactDOM.render(<Simon />, document.getElementById('root'));\n"],"sourceRoot":""}